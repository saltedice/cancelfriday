<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cancel Friday | SALT - Subscribers Against Lawless Tyranny</title>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Black+Ops+One&family=JetBrains+Mono:wght@400;700&family=Permanent+Marker&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --black: #0a0a0a;
            --white: #f0f0e8;
            --red: #e63946;
            --orange: #f77f00;
            --salt: #e8e4d9;
            --green: #2ecc71;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--black);
            color: var(--white);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.04;
            z-index: 1000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 1.5rem 0;
            border-bottom: 2px solid var(--white);
        }

        .logo {
            font-family: 'Black Ops One', cursive;
            font-size: clamp(4rem, 14vw, 8rem);
            color: var(--salt);
            text-shadow: 4px 4px 0 var(--red);
            letter-spacing: 0.08em;
            line-height: 1;
        }

        .acronym {
            font-size: clamp(0.6rem, 1.5vw, 0.85rem);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            opacity: 0.7;
            margin-top: 0.5rem;
        }

        .week-badge {
            display: inline-block;
            background: var(--red);
            padding: 0.5rem 1rem;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            letter-spacing: 0.1em;
            margin-top: 1rem;
        }

        /* Emotional Opening */
        /* Main Headline */
        .main-headline {
            text-align: center;
            padding: 2.5rem 1rem 1.5rem;
        }

        .headline-big {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(2rem, 6vw, 3.5rem);
            letter-spacing: 0.08em;
            color: var(--white);
            line-height: 1.1;
        }

        /* Body Copy */
        .body-copy {
            text-align: center;
            padding: 1rem 1rem 2rem;
            max-width: 650px;
            margin: 0 auto;
        }

        .body-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: clamp(0.85rem, 2vw, 1rem);
            line-height: 1.8;
            color: rgba(240, 240, 232, 0.85);
        }

        /* Action Boxes */
        .action-boxes {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem;
            flex-wrap: wrap;
        }

        .action-box {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            letter-spacing: 0.1em;
            padding: 0.75rem 1.25rem;
            border: 2px solid var(--white);
            color: var(--white);
        }

        .action-arrow {
            font-size: clamp(1rem, 2.5vw, 1.5rem);
            color: var(--red);
        }

        /* Manifesto */
        .manifesto {
            text-align: center;
            padding: 2rem 1rem;
        }

        .manifesto-line {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            letter-spacing: 0.08em;
            color: var(--white);
            margin-bottom: 1rem;
        }

        .manifesto-hero {
            text-align: center;
            padding: 1.5rem 1rem;
            margin-bottom: 0.5rem;
        }

        .manifesto-line {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.3rem, 4vw, 2.2rem);
            letter-spacing: 0.05em;
            color: var(--white);
            line-height: 1.3;
        }

        .manifesto-receipts {
            color: var(--orange);
            margin-top: 0.5rem;
        }

        /* Aggressive Tagline */
        .aggressive-tagline {
            text-align: center;
            padding: 1.5rem 1rem;
            background: var(--orange);
        }

        .tagline-sub {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.1rem, 3vw, 1.6rem);
            letter-spacing: 0.08em;
            color: var(--black);
        }

        /* Combined Stats Box */
        .combined-stats {
            text-align: center;
            padding: 2rem 1.5rem;
            margin: 2rem auto;
            max-width: 600px;
            background: rgba(0,0,0,0.6);
            border: 2px solid var(--red);
        }

        .stats-count {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(4rem, 15vw, 7rem);
            color: var(--salt);
            line-height: 1;
            text-shadow: 0 0 30px rgba(230, 57, 70, 0.5);
        }

        .stats-count-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        .stats-progress {
            max-width: 400px;
            margin: 0 auto 1.5rem;
        }

        .stats-progress-bar {
            background: rgba(255,255,255,0.1);
            height: 24px;
            position: relative;
            overflow: hidden;
        }

        .stats-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--orange), var(--red));
            transition: width 0.5s ease;
        }

        .stats-progress-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        .stats-progress.hit .stats-progress-text {
            color: var(--orange);
        }

        .stats-progress.hit .stats-progress-text::before {
            content: '✓ ';
        }

        .stats-impact {
            margin-bottom: 0.25rem;
        }

        .stats-impact-amount {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            color: var(--orange);
        }

        .stats-impact-suffix {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .stats-companies {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            opacity: 0.7;
        }

        /* How It Works */
        .how-it-works {
            text-align: center;
            padding: 2rem 1rem;
            background: linear-gradient(180deg, rgba(230, 57, 70, 0.1) 0%, transparent 100%);
            border-bottom: 2px solid var(--red);
        }

        .how-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.5rem, 4vw, 2rem);
            color: var(--orange);
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .how-subtitle {
            font-size: 0.85rem;
            opacity: 0.8;
            max-width: 500px;
            margin: 0 auto 1.5rem;
            line-height: 1.6;
        }

        .flow-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            letter-spacing: 0.05em;
        }

        .flow-step {
            background: rgba(255,255,255,0.1);
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }

        .flow-arrow {
            color: var(--orange);
        }

        /* Threshold Tracker */
        .threshold-section {
            text-align: center;
            padding: 2rem 1rem;
            background: rgba(247, 127, 0, 0.1);
            border-bottom: 2px solid var(--orange);
        }

        .threshold-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            letter-spacing: 0.1em;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }

        .threshold-message {
            font-size: 0.85rem;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .threshold-bar-container {
            max-width: 500px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            height: 40px;
            position: relative;
            overflow: hidden;
        }

        .threshold-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--orange), var(--red));
            transition: width 0.5s ease;
            border-radius: 8px;
        }

        .threshold-bar-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            letter-spacing: 0.05em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .threshold-remaining {
            margin-top: 0.75rem;
            font-size: 0.9rem;
            color: var(--orange);
        }

        .threshold-hit {
            color: var(--orange);
        }

        /* Threshold Hit State */
        .threshold-section.hit {
            background: rgba(247, 127, 0, 0.15);
            border-bottom-color: var(--orange);
            animation: threshold-pulse 2s ease-out;
        }

        .threshold-section.hit .threshold-title {
            color: var(--orange);
        }

        .threshold-section.hit .threshold-bar-fill {
            background: linear-gradient(90deg, var(--orange), var(--red));
        }

        @keyframes threshold-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* Projected Impact Banner */
        .impact-banner {
            text-align: center;
            padding: 1.5rem 1rem;
            background: rgba(230, 57, 70, 0.1);
            border-bottom: 1px solid rgba(230, 57, 70, 0.3);
        }

        .impact-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .impact-amount {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--red);
            font-family: 'JetBrains Mono', monospace;
        }

        .impact-subtext {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        .impact-subtext strong {
            color: var(--white);
        }

        /* Pre-threshold scoreboard state */
        .scoreboard-section.pre-threshold .scoreboard-subtitle {
            color: var(--orange);
        }

        .scoreboard-section.pre-threshold::before {
            content: '';
            display: block;
            text-align: center;
            padding: 0.75rem;
            margin-bottom: 1rem;
            background: rgba(247, 127, 0, 0.1);
            border: 1px dashed var(--orange);
            border-radius: 6px;
            font-size: 0.8rem;
            color: var(--orange);
        }

        /* Active state - threshold hit */
        .scoreboard-section.active .leader-banner {
            animation: leader-glow 2s ease-in-out infinite alternate;
        }

        @keyframes leader-glow {
            from { box-shadow: 0 0 20px rgba(230, 57, 70, 0.3); }
            to { box-shadow: 0 0 40px rgba(230, 57, 70, 0.5); }
        }

        /* Countdown */
        .countdown-bar {
            text-align: center;
            padding: 1rem 1.5rem;
            background: var(--black);
            border: 2px solid var(--red);
            margin: 1rem auto;
            max-width: 500px;
        }

        .countdown-label {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            letter-spacing: 0.15em;
            color: var(--orange);
            margin-bottom: 0.5rem;
        }

        .countdown-timer {
            font-family: 'JetBrains Mono', monospace;
            font-size: clamp(2rem, 6vw, 3rem);
            font-weight: 700;
            color: var(--white);
            letter-spacing: 0.05em;
        }

        .countdown-timer .cd-unit {
            display: inline-block;
            min-width: 2.5ch;
            text-align: center;
        }

        .countdown-timer .cd-sep {
            opacity: 0.4;
            margin: 0 0.1em;
        }

        .countdown-timer .cd-label {
            display: block;
            font-size: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.5;
        }

        .countdown-done {
            color: var(--red);
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(2rem, 6vw, 3rem);
            letter-spacing: 0.1em;
        }

        /* Friday Mode - IT'S TIME */
        body.friday-mode .countdown-bar {
            background: linear-gradient(90deg, rgba(230,57,70,0.4), rgba(230,57,70,0.4));
            animation: friday-pulse 1s ease-in-out infinite;
        }

        @keyframes friday-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        body.friday-mode .countdown-label {
            color: var(--white);
            font-size: clamp(1.2rem, 3vw, 1.5rem);
        }

        /* Confirmation Button */
        .confirm-btn {
            padding: 0.5rem 1rem;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 0.9rem;
            letter-spacing: 0.08em;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .confirm-btn.pending {
            background: var(--red);
            color: var(--white);
        }

        .confirm-btn.pending:hover {
            background: #c0313e;
        }

        .confirm-btn.done {
            background: var(--orange);
            color: var(--black);
            cursor: default;
        }

        /* User Commits Friday Mode */
        .user-commits-section.friday-mode {
            background: rgba(230, 57, 70, 0.15);
            border-color: var(--red);
        }

        .user-commits-section.friday-mode .user-commits-title {
            color: var(--red);
        }

        .commit-action-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem;
            background: rgba(0,0,0,0.2);
            border-radius: 6px;
            margin-bottom: 0.5rem;
        }

        .commit-action-name {
            font-weight: 600;
        }

        .commit-action-status {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .commit-action-status.confirmed {
            color: var(--orange);
            opacity: 1;
        }

        /* Post-Friday Results */
        .results-summary {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(180deg, rgba(247, 127, 0, 0.15) 0%, transparent 100%);
            border: 2px solid var(--orange);
            margin-bottom: 1.5rem;
        }

        .results-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            color: var(--orange);
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .results-count {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(2rem, 6vw, 3rem);
            color: var(--white);
        }

        .results-impact {
            font-size: 1rem;
            color: var(--orange);
            margin-top: 0.5rem;
        }

        /* Scoreboard */
        .scoreboard-section {
            padding: 2rem 0;
        }

        .scoreboard-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .scoreboard-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.3rem, 3vw, 1.6rem);
            letter-spacing: 0.1em;
            color: var(--salt);
        }

        .scoreboard-subtitle {
            font-size: 0.75rem;
            opacity: 0.6;
            margin-top: 0.25rem;
        }


        /* Leader Banner */
        .leader-banner {
            background: linear-gradient(180deg, rgba(230, 57, 70, 0.2) 0%, rgba(230, 57, 70, 0.05) 100%);
            border: 2px solid var(--red);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .leader-banner:hover {
            background: rgba(230, 57, 70, 0.25);
        }

        .leader-label {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 0.85rem;
            color: var(--red);
            letter-spacing: 0.15em;
            margin-bottom: 0.25rem;
        }

        .leader-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.5rem, 4vw, 2rem);
            color: var(--white);
            line-height: 1.1;
        }

        .leader-count {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--orange);
            margin-top: 0.25rem;
        }



        /* Company Grid */
        .company-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        @media (max-width: 900px) {
            .company-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 600px) {
            .company-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
            }
        }

        /* Compact Company Card */
        .company-card {
            border: 2px solid rgba(255,255,255,0.2);
            padding: 1.25rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            text-align: center;
        }

        .company-card:hover {
            border-color: var(--white);
            background: rgba(255,255,255,0.03);
        }

        .company-card.selected {
            border-color: var(--white);
            border-width: 3px;
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.03);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        .company-card.committed {
            border-color: var(--orange);
            border-width: 2px;
        }

        .company-card.committed::after {
            content: '✓';
            position: absolute;
            top: 0.4rem;
            right: 0.4rem;
            background: var(--orange);
            color: var(--black);
            width: 1.2rem;
            height: 1.2rem;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .company-card.leader {
            border-color: var(--orange);
        }

        .score-badge {
            position: absolute;
            top: 0.4rem;
            left: 0.4rem;
            padding: 0.15rem 0.4rem;
            font-size: 0.55rem;
            font-weight: 700;
            letter-spacing: 0.03em;
            border-radius: 3px;
            color: #fff;
        }

        .score-badge.score-high { background: var(--red); }
        .score-badge.score-mid { background: var(--orange); }
        .score-badge.score-low { background: #666; }

        .company-card .company-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.4rem;
            margin-bottom: 0.2rem;
            line-height: 1.1;
            color: var(--white);
        }

        .company-card .company-parent {
            font-size: 0.55rem;
            opacity: 0.5;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .company-card .vote-bar {
            height: 3px;
            background: rgba(255,255,255,0.1);
            margin-bottom: 0.3rem;
        }

        .company-card .vote-fill {
            height: 100%;
            background: var(--orange);
            transition: width 0.3s ease;
        }

        .company-card .vote-count {
            font-size: 0.65rem;
            opacity: 0.6;
        }

        .details-indicator {
            text-align: center;
            color: var(--orange);
            font-size: 0.8rem;
            margin-top: 1rem;
            opacity: 0.7;
            animation: pulse-indicator 2s ease-in-out infinite;
        }

        @keyframes pulse-indicator {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        /* Detail Section (below grid) */
        .detail-section {
            margin-top: 2rem;
            padding: 2rem;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
        }

        .detail-section.hidden {
            display: none;
        }

        .detail-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .detail-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(2rem, 6vw, 3rem);
            color: var(--white);
            line-height: 1.1;
        }

        .detail-parent {
            font-size: 0.8rem;
            opacity: 0.6;
            margin-top: 0.25rem;
        }

        .detail-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            font-size: 0.85rem;
        }

        .detail-stats .stat {
            text-align: center;
        }

        .detail-stats .stat-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--orange);
        }

        .detail-stats .stat-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.6;
        }

        /* Why Box */
        .why-box {
            background: rgba(230, 57, 70, 0.1);
            border: 1px solid rgba(230, 57, 70, 0.3);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: left;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .why-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            color: var(--red);
            margin-bottom: 0.75rem;
            letter-spacing: 0.05em;
        }

        .why-list {
            list-style: none;
            font-size: 0.75rem;
            line-height: 1.8;
        }

        .why-list li {
            padding-left: 1.25rem;
            position: relative;
            margin-bottom: 0.5rem;
        }

        .why-list li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--red);
        }

        .why-list .source-link {
            color: var(--orange);
            font-size: 0.6rem;
            text-decoration: none;
            margin-left: 0.3rem;
        }

        .why-list .source-link:hover {
            text-decoration: underline;
        }

        .why-note {
            background: rgba(247, 127, 0, 0.1);
            border: 1px solid rgba(247, 127, 0, 0.3);
            padding: 0.75rem;
            margin-top: 1rem;
            font-size: 0.7rem;
            line-height: 1.5;
        }

        .why-note strong {
            color: var(--orange);
        }

        /* Action Buttons in Detail */
        .detail-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .detail-commit-btn {
            padding: 0.85rem 2rem;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            letter-spacing: 0.1em;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .detail-commit-btn.commit {
            background: var(--red);
            color: var(--white);
        }

        .detail-commit-btn.commit:hover {
            background: #c0313e;
        }

        .detail-commit-btn.committed {
            background: var(--orange);
            color: var(--black);
        }

        .detail-price {
            text-align: center;
            font-size: 0.8rem;
            opacity: 0.6;
            margin-top: 1rem;
        }

        /* Don't Have It Section */
        .dont-have-it {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(0,0,0,0.6);
            border: 2px solid var(--red);
            text-align: center;
        }

        .dont-have-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            letter-spacing: 0.1em;
            color: var(--white);
            margin-bottom: 0.5rem;
        }

        .dont-have-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 1.25rem;
            line-height: 1.5;
        }

        .share-actions {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .share-action-btn {
            padding: 0.6rem 1.25rem;
            font-size: 0.7rem;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            border: 2px solid var(--red);
            background: transparent;
            color: var(--white);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .share-action-btn:hover {
            background: var(--red);
            border-color: var(--red);
        }

        /* Total Stats */
        .total-stats {
            text-align: center;
            padding: 1.5rem;
            margin-top: 1rem;
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
        }

        .total-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            opacity: 0.6;
        }

        .total-count {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(2rem, 5vw, 2.5rem);
            color: var(--orange);
            margin-top: 0.25rem;
        }

        .total-impact {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 0.25rem;
        }

        /* User Commits Section */
        .user-commits-section {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: #1a1a1a;
            border: 2px solid var(--red);
        }

        .user-commits-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            color: var(--orange);
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
        }

        .user-commits-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .user-commit-chip {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0.75rem;
            background: rgba(0,0,0,0.3);
            border: 2px solid var(--salt);
            font-size: 0.8rem;
            color: var(--salt);
        }

        .user-commit-remove {
            cursor: pointer;
            opacity: 0.6;
            font-size: 1rem;
        }

        .user-commit-remove:hover {
            opacity: 1;
            color: var(--red);
        }

        .user-commits-impact {
            font-size: 0.85rem;
            color: var(--salt);
        }

        .user-commits-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .share-btn {
            flex: 1;
            padding: 0.75rem;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            letter-spacing: 0.1em;
            border: none;
            cursor: pointer;
            background: var(--orange);
            color: var(--black);
        }

        .share-btn:hover {
            opacity: 0.9;
        }

        /* Data Manager Story */
        .data-manager-section {
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .data-manager-text {
            font-size: 0.85rem;
            line-height: 1.8;
            max-width: 550px;
            margin: 0 auto;
            color: rgba(240, 240, 232, 0.75);
            font-style: italic;
        }

        /* Email Signup */
        .email-section {
            text-align: center;
            padding: 2rem 1rem;
            background: rgba(247, 127, 0, 0.1);
            border-radius: 8px;
            margin: 2rem 0;
        }

        .email-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.3rem;
            color: var(--orange);
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .email-subtitle {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 1rem;
        }

        .email-form {
            display: flex;
            gap: 0.5rem;
            max-width: 400px;
            margin: 0 auto;
        }

        .email-input {
            flex: 1;
            padding: 0.75rem 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 4px;
            color: var(--white);
        }

        .email-input::placeholder {
            opacity: 0.5;
        }

        .email-btn {
            padding: 0.75rem 1.5rem;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            letter-spacing: 0.1em;
            background: var(--orange);
            color: var(--black);
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .email-btn:hover {
            opacity: 0.9;
        }

        /* Affiliates Section */
        .affiliates {
            text-align: center;
            padding: 2rem 1rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .affiliates-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            letter-spacing: 0.15em;
            margin-bottom: 1rem;
            opacity: 0.6;
        }

        .affiliates-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .affiliates-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.85rem;
            padding: 0.5rem 1rem;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.2s ease;
        }

        .affiliates-links a:hover {
            color: var(--white);
            border-color: var(--white);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem 1rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .footer-badge {
            font-size: 0.55rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.4;
        }

        /* Story Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
        }

        .story-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            padding: 2rem 0;
        }

        .story-preview {
            width: 270px;
            height: 480px;
            border: 2px solid var(--white);
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .story-content {
            width: 100%;
            height: 100%;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a0808 40%, #2a0a0a 60%, #0a0a0a 100%);
            position: relative;
            overflow: hidden;
        }

        .story-content::before {
            content: 'SALT';
            position: absolute;
            font-family: 'Black Ops One', cursive;
            font-size: 8rem;
            color: rgba(230, 57, 70, 0.04);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-15deg);
            pointer-events: none;
            letter-spacing: 0.1em;
        }

        .story-header {
            text-align: center;
        }

        .story-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.8rem;
            color: var(--white);
            letter-spacing: 0.15em;
            margin-bottom: 0.25rem;
        }

        .story-logo {
            font-family: 'Black Ops One', cursive;
            font-size: 2rem;
            color: var(--salt);
            text-shadow: 1px 1px 0 var(--red), 0 0 20px rgba(230, 57, 70, 0.3);
            letter-spacing: 0.08em;
        }

        .story-acronym {
            font-size: 0.4rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            opacity: 0.6;
            margin-top: 0.15rem;
        }

        .story-main {
            text-align: center;
        }

        .story-week {
            font-size: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            opacity: 0.5;
            margin-bottom: 0.25rem;
        }

        .story-action {
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 0.5rem;
        }

        .story-target {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            color: var(--red);
            letter-spacing: 0.03em;
            line-height: 1.1;
            margin-bottom: 0.75rem;
            text-shadow: 0 0 40px rgba(230, 57, 70, 0.4);
        }

        .story-target.multi {
            font-size: 1.6rem;
        }

        .story-datetime {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.4rem;
            color: var(--orange);
            margin-bottom: 0.25rem;
        }

        .story-timezone {
            font-size: 0.5rem;
            opacity: 0.5;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .story-committed {
            margin-top: 1rem;
            padding: 0.4rem 0.75rem;
            background: rgba(230, 57, 70, 0.2);
            border: 1px solid var(--red);
            display: inline-block;
            font-size: 0.6rem;
            letter-spacing: 0.05em;
        }

        .story-footer {
            text-align: center;
        }

        .story-reason {
            font-size: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.6;
            margin-bottom: 0.75rem;
            line-height: 1.5;
        }

        .story-url {
            font-size: 0.75rem;
            color: var(--salt);
            font-weight: 700;
        }

        .story-hashtag {
            font-size: 0.5rem;
            margin-top: 0.5rem;
            opacity: 0.5;
        }

        .modal-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            width: 100%;
            max-width: 270px;
        }

        .modal-actions-row {
            display: flex;
            gap: 0.75rem;
        }

        .modal-btn {
            flex: 1;
            padding: 0.875rem 1rem;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            letter-spacing: 0.1em;
            cursor: pointer;
            border: 2px solid var(--white);
            transition: all 0.15s ease;
            text-align: center;
        }

        .modal-btn.primary {
            background: var(--white);
            color: var(--black);
        }

        .modal-btn.secondary {
            background: transparent;
            color: var(--white);
        }

        .modal-btn.close-btn {
            background: transparent;
            color: var(--white);
            opacity: 0.6;
            font-size: 0.9rem;
            padding: 0.5rem;
            border: none;
        }

        .modal-btn:hover {
            transform: scale(1.03);
        }

        .modal-btn.close-btn:hover {
            opacity: 1;
        }

        /* Format Picker */
        .format-picker {
            width: 100%;
            max-width: 320px;
            margin-bottom: 0.5rem;
        }

        .format-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .format-options {
            display: flex;
            gap: 0.5rem;
        }

        .format-btn {
            flex: 1;
            padding: 0.6rem 0.5rem;
            background: transparent;
            border: 2px solid var(--salt);
            color: var(--salt);
            cursor: pointer;
            text-align: center;
            transition: all 0.15s ease;
        }

        .format-btn.active {
            border-color: var(--orange);
            background: var(--orange);
            color: var(--black);
        }

        .format-btn-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 0.9rem;
            letter-spacing: 0.08em;
            display: block;
        }

        .format-btn-ratio {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6rem;
            opacity: 0.7;
        }

        /* Format-specific preview sizes */
        .story-preview.format-story {
            width: 270px;
            height: 480px;
        }

        .story-preview.format-post {
            width: 300px;
            height: 300px;
        }

        .story-preview.format-banner {
            width: 360px;
            height: 203px;
        }

        /* POST format adjustments */
        .story-content.format-post {
            padding: 1rem;
        }

        .story-content.format-post .story-title {
            font-size: 1.4rem;
        }

        .story-content.format-post .story-logo {
            font-size: 1.5rem;
        }

        .story-content.format-post .story-acronym {
            font-size: 0.35rem;
        }

        .story-content.format-post .story-week {
            font-size: 0.6rem;
            padding: 0.2rem 0.6rem;
        }

        .story-content.format-post .story-action {
            font-size: 0.55rem;
        }

        .story-content.format-post .story-target {
            font-size: 1.1rem;
        }

        .story-content.format-post .story-datetime {
            font-size: 0.5rem;
        }

        .story-content.format-post .story-timezone {
            font-size: 0.45rem;
        }

        .story-content.format-post .story-committed {
            font-size: 0.5rem;
            padding: 0.3rem 0.5rem;
        }

        .story-content.format-post .story-reason {
            font-size: 0.4rem;
            margin-bottom: 0.4rem;
        }

        .story-content.format-post .story-url {
            font-size: 0.6rem;
        }

        .story-content.format-post .story-hashtag {
            font-size: 0.4rem;
            margin-top: 0.3rem;
        }

        /* BANNER format adjustments - centered vertical stack, tight spacing */
        .story-content.format-banner {
            padding: 0.6rem 1rem;
            justify-content: center;
            gap: 0.3rem;
        }

        .story-content.format-banner .story-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .story-content.format-banner .story-title {
            font-size: 1.1rem;
            margin-bottom: 0;
        }

        .story-content.format-banner .story-logo {
            font-size: 1rem;
        }

        .story-content.format-banner .story-acronym {
            display: none;
        }

        .story-content.format-banner .story-main {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .story-content.format-banner .story-week {
            font-size: 0.45rem;
            padding: 0.15rem 0.4rem;
            margin-bottom: 0;
        }

        .story-content.format-banner .story-action {
            font-size: 0.4rem;
            margin-bottom: 0;
        }

        .story-content.format-banner .story-target {
            font-size: 1rem;
        }

        .story-content.format-banner .story-target.multi {
            font-size: 0.7rem;
        }

        .story-content.format-banner .story-datetime {
            font-size: 0.4rem;
            margin-top: 0;
        }

        .story-content.format-banner .story-timezone,
        .story-content.format-banner .story-reason {
            display: none;
        }

        .story-content.format-banner .story-committed {
            font-size: 0.4rem;
            padding: 0.15rem 0.4rem;
            margin-top: 0;
        }

        .story-content.format-banner .story-footer {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .story-content.format-banner .story-url {
            font-size: 0.5rem;
        }

        .story-content.format-banner .story-hashtag {
            font-size: 0.4rem;
            margin-top: 0;
        }

        /* Share Banners Section */
        .banners-section {
            text-align: center;
            padding: 3rem 1rem;
            background: linear-gradient(180deg, transparent 0%, rgba(247, 127, 0, 0.1) 100%);
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .banners-section-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.5rem, 4vw, 2rem);
            color: var(--white);
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .banners-section-subtitle {
            font-size: 0.8rem;
            opacity: 0.6;
            margin-bottom: 1.5rem;
        }

        .banner-format-picker {
            margin-bottom: 1.5rem;
        }

        .banner-format-picker .format-options {
            justify-content: center;
        }

        .banners-grid {
            display: flex;
            gap: 1.5rem;
            justify-content: flex-start;
            max-width: 100%;
            margin: 0 auto 2rem;
            overflow-x: auto;
            padding: 1rem 2rem;
            -webkit-overflow-scrolling: touch;
            scroll-snap-type: x mandatory;
        }

        .banners-grid > * {
            scroll-snap-align: center;
            flex-shrink: 0;
        }

        @media (max-width: 800px) {
            .banners-grid {
                padding-left: 1rem;
                padding-right: 1rem;
            }
        }

        .share-banner {
            background: var(--black);
            border: 2px solid rgba(255,255,255,0.2);
            padding: 2rem 1.5rem;
            padding-top: 2.5rem;
            text-align: center;
            position: relative;
            width: 202px;
            min-width: 202px;
            height: 360px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            box-sizing: border-box;
        }

        .share-banner.vibe-power {
            border-color: var(--red);
            background: linear-gradient(180deg, rgba(230,57,70,0.15) 0%, var(--black) 100%);
        }

        .share-banner.vibe-crisis {
            border-color: var(--orange);
            background: linear-gradient(180deg, rgba(247,127,0,0.15) 0%, var(--black) 100%);
        }

        .share-banner.vibe-friday {
            border-color: var(--white);
            background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, var(--black) 100%);
        }

        .share-banner.vibe-urgent {
            border-color: #ffd700;
            background: linear-gradient(180deg, rgba(255,215,0,0.2) 0%, var(--black) 100%);
        }
        .share-banner.vibe-urgent .banner-headline {
            color: #ffd700;
        }

        .share-banner.vibe-money {
            border-color: #00ff88;
            background: linear-gradient(180deg, rgba(0,255,136,0.1) 0%, var(--black) 100%);
        }

        .share-banner.vibe-challenge {
            border-color: var(--red);
            background: repeating-linear-gradient(
                -45deg,
                var(--black),
                var(--black) 10px,
                rgba(230,57,70,0.1) 10px,
                rgba(230,57,70,0.1) 20px
            );
        }

        .banner-logo {
            font-family: 'Black Ops One', cursive;
            font-size: 2rem;
            color: var(--salt);
            text-shadow: 2px 2px 0 var(--red);
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .banner-acronym {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: rgba(255,255,255,0.6);
            margin-bottom: 1.25rem;
        }

        .banner-headline {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.4rem;
            line-height: 1.2;
            color: var(--white);
            margin-bottom: 1rem;
        }

        .banner-subtext {
            font-size: 0.7rem;
            line-height: 1.5;
            opacity: 0.7;
            margin-bottom: 1.5rem;
        }

        .banner-cta {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            color: var(--orange);
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .banner-actions {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .banner-save-btn {
            padding: 0.75rem 1.5rem;
            font-size: 0.85rem;
            font-family: 'Bebas Neue', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: none;
            background: var(--orange);
            color: var(--black);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
        }

        .banner-save-btn:hover {
            background: var(--white);
            transform: scale(1.05);
        }

        .banner-copy-btn {
            padding: 0.75rem 1.5rem;
            font-size: 0.85rem;
            font-family: 'Bebas Neue', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: 2px solid var(--orange);
            background: transparent;
            color: var(--orange);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .banner-copy-btn:hover {
            background: var(--orange);
            color: var(--black);
            transform: scale(1.05);
        }

        /* Hide copy on mobile - doesn't work */
        @media (max-width: 768px) {
            .banner-copy-btn {
                display: none;
            }
            .banner-save-btn {
                width: 100%;
            }
        }

        /* Image preview modal for mobile */
        .image-preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            padding: 1rem;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .image-preview-modal.show {
            display: flex;
        }

        .image-preview-modal img {
            max-width: 100%;
            max-height: 70vh;
            object-fit: contain;
        }

        .image-preview-instructions {
            color: var(--white);
            text-align: center;
            margin-top: 1.5rem;
            font-size: 1.1rem;
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 0.05em;
        }

        .image-preview-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--orange);
            color: var(--black);
            border: none;
            padding: 0.75rem 1.5rem;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            cursor: pointer;
        }

        .download-all-container {
            text-align: center;
            margin: 1.5rem 0;
        }

        .download-all-btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-family: 'Bebas Neue', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: 2px solid var(--orange);
            background: transparent;
            color: var(--orange);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .download-all-btn:hover {
            background: var(--orange);
            color: var(--black);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--white);
            color: var(--black);
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 9999;
            max-width: 90%;
            text-align: center;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.error {
            background: var(--red);
            color: var(--white);
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--black);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .loading-text {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            letter-spacing: 0.2em;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        .hidden {
            display: none !important;
        }

        /* Mobile adjustments */
        @media (max-width: 600px) {
            .email-form {
                flex-direction: column;
            }

            .flow-steps {
                flex-direction: column;
                gap: 0.25rem;
            }

            .flow-arrow {
                display: none;
            }

            .company-card {
                padding: 1rem 0.75rem;
            }

            .company-card .company-name {
                font-size: 1.1rem;
            }

            .company-card .company-parent {
                font-size: 0.5rem;
            }

            .score-badge {
                font-size: 0.45rem;
                padding: 0.1rem 0.3rem;
            }

            .detail-section {
                padding: 1.25rem;
            }

            .why-box {
                padding: 1rem;
            }

            .why-title {
                font-size: 1rem;
            }

            .why-list li {
                font-size: 0.7rem;
            }

            .detail-stats {
                gap: 1rem;
            }

            .detail-actions {
                flex-direction: column;
            }

            .detail-commit-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="grain"></div>

    <div class="loading" id="loading">
        <div class="loading-text">LOADING...</div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">SALT</div>
            <div class="acronym">Subscribers Against Lawless Tyranny</div>
            <div class="week-badge">WEEK <span id="week-number">1</span></div>
        </header>

        <!-- Manifesto -->
        <section class="manifesto-hero">
            <div class="manifesto-line">These companies fund ICE. They build the deportation machine.</div>
            <div class="manifesto-line">They bankroll the administration.</div>
            <div class="manifesto-line manifesto-receipts">We have receipts.</div>
        </section>

        <!-- Countdown Timer -->
        <section class="countdown-bar">
            <div class="countdown-label">NEXT CANCEL FRIDAY</div>
            <div class="countdown-timer" id="countdown-timer">
                <span class="cd-unit">00<span class="cd-label">days</span></span>
                <span class="cd-sep">:</span>
                <span class="cd-unit">00<span class="cd-label">hrs</span></span>
                <span class="cd-sep">:</span>
                <span class="cd-unit">00<span class="cd-label">min</span></span>
                <span class="cd-sep">:</span>
                <span class="cd-unit">00<span class="cd-label">sec</span></span>
            </div>
        </section>

        <!-- Main Headline -->
        <section class="main-headline">
            <div class="headline-big">EVERY FRIDAY AT NOON, WE CANCEL TOGETHER.</div>
        </section>

        <!-- Body Copy -->
        <section class="body-copy">
            <div class="body-text">
                Each week you choose. On Friday at noon, we cancel together.<br>
                Whichever you want. Whatever you can.<br>
                Next week we do it again.
            </div>
        </section>

        <!-- Action Boxes -->
        <section class="action-boxes">
            <div class="action-box">CHOOSE</div>
            <span class="action-arrow">→</span>
            <div class="action-box">COMMIT</div>
            <span class="action-arrow">→</span>
            <div class="action-box">CANCEL</div>
            <span class="action-arrow">→</span>
            <div class="action-box">REPEAT</div>
        </section>

        <!-- Aggressive Tagline -->
        <section class="aggressive-tagline">
            <div class="tagline-sub">WE CAN LIVE WITHOUT STREAMING. THEY CAN'T LIVE WITHOUT US.</div>
        </section>

        <!-- Scoreboard -->
        <section class="scoreboard-section">
            <div class="scoreboard-header">
                <div class="scoreboard-title">WHO ARE YOU CANCELLING?</div>
                <div class="scoreboard-subtitle">Pick one. Pick more. Commit and pledge to cancel.</div>
            </div>

            <!-- Current Leader Banner -->
            <div class="leader-banner" id="leader-banner">
                <div class="leader-label">🔥 CURRENT LEADER</div>
                <div class="leader-name" id="leader-name">AMAZON PRIME</div>
                <div class="leader-count" id="leader-count">0 committed</div>
            </div>

            <!-- Company Grid -->
            <div class="company-grid" id="company-grid">
                <!-- Populated by JS -->
            </div>

            <!-- Details Indicator -->
            <div class="details-indicator hidden" id="details-indicator">↓ details below</div>

            <!-- Detail Section (shows when card is clicked) -->
            <div class="detail-section hidden" id="detail-section">
                <div class="detail-header">
                    <div class="detail-name" id="detail-name"></div>
                    <div class="detail-parent" id="detail-parent"></div>
                    <div class="detail-stats">
                        <div class="stat">
                            <div class="stat-value" id="detail-committed">0</div>
                            <div class="stat-label">Committed</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="detail-impact">$0</div>
                            <div class="stat-label">Annual Impact</div>
                        </div>
                    </div>
                </div>
                <div class="why-box" id="why-box">
                    <!-- Populated by JS -->
                </div>
                <div class="detail-actions">
                    <button class="detail-commit-btn commit" id="detail-commit-btn">
                        I'M CANCELLING THIS
                    </button>
                </div>
                <div class="detail-price" id="detail-price"></div>
            </div>

        </section>

        <!-- Combined Stats Box -->
        <section class="combined-stats" id="combined-stats">
            <div class="stats-count" id="stats-count">0</div>
            <div class="stats-count-label">COMMITTED TO CANCEL</div>

            <div class="stats-progress">
                <div class="stats-progress-bar">
                    <div class="stats-progress-fill" id="stats-progress-fill" style="width: 0%"></div>
                </div>
                <div class="stats-progress-text" id="stats-progress-text">0 / 1,000</div>
            </div>

            <div class="stats-impact">
                <span class="stats-impact-amount" id="stats-impact-amount">$0</span><span class="stats-impact-suffix">/year walking out the door</span>
            </div>
            <div class="stats-companies" id="stats-companies">across 0 companies</div>
        </section>

        <!-- User's Commits -->
        <section class="user-commits-section hidden" id="user-commits-section">
            <div class="user-commits-title">YOUR FRIDAY CANCELLATIONS</div>
            <div class="user-commits-list" id="user-commits-list">
                <!-- Populated by JS -->
            </div>
            <div class="user-commits-impact" id="user-commits-impact">
                You're cutting $0/month · $0/year
            </div>
            <div class="user-commits-actions">
                <button class="share-btn" onclick="openStoryModal()">SHARE YOUR COMMITMENT</button>
            </div>
        </section>

        <!-- Share Banners Section -->
        <section class="banners-section">
            <div class="banners-section-title">SPREAD THE WORD</div>
            <div class="banners-section-subtitle">Save a banner. Share it everywhere. Bring others in.</div>

            <div class="banner-format-picker">
                <div class="format-label">SAVE AS</div>
                <div class="format-options">
                    <button class="format-btn active" onclick="setBannerFormat('story', this)">
                        <span class="format-btn-name">STORY</span>
                        <span class="format-btn-ratio">9:16</span>
                    </button>
                    <button class="format-btn" onclick="setBannerFormat('post', this)">
                        <span class="format-btn-name">POST</span>
                        <span class="format-btn-ratio">1:1</span>
                    </button>
                    <button class="format-btn" onclick="setBannerFormat('banner', this)">
                        <span class="format-btn-name">BANNER</span>
                        <span class="format-btn-ratio">16:9</span>
                    </button>
                </div>
            </div>

            <div class="download-all-container">
                <button class="download-all-btn" onclick="downloadAllBanners()">↓ DOWNLOAD ALL BANNERS</button>
            </div>

            <div class="banners-grid">
                <!-- Banner 1 -->
                <div class="share-banner vibe-power" id="banner-1">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">EVERY FRIDAY AT NOON<br>WE CANCEL TOGETHER</div>
                    <div class="banner-subtext">They don't fear protests. They fear earnings calls.</div>
                    <div class="banner-cta">CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(1)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 2 -->
                <div class="share-banner vibe-crisis" id="banner-2">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">YOUR SUBSCRIPTION PAID FOR SOMEONE'S DEPORTATION.</div>
                    <div class="banner-subtext">Still cool with that? No? Join us on Friday.</div>
                    <div class="banner-cta">CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(2)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 3 -->
                <div class="share-banner vibe-friday" id="banner-3">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">THEY CHOSE FASCISM.<br>CHOOSE CONSEQUENCES.</div>
                    <div class="banner-subtext">Cancel one. This Friday. Together.</div>
                    <div class="banner-cta">CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(3)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 4 -->
                <div class="share-banner vibe-urgent" id="banner-4">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">THIS ISN'T A BOYCOTT.<br>IT'S ECONOMIC WARFARE.</div>
                    <div class="banner-subtext">They declared war on us. We're hitting back.</div>
                    <div class="banner-cta">CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(4)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 5 -->
                <div class="share-banner vibe-money" id="banner-5">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">YOUR $15/MONTH<br>FUNDS DEPORTATIONS.</div>
                    <div class="banner-subtext">They have contracts with ICE. We have receipts.</div>
                    <div class="banner-cta">CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(5)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 6 -->
                <div class="share-banner vibe-challenge" id="banner-6">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">STILL SUBSCRIBED?<br>STILL COMPLICIT.</div>
                    <div class="banner-subtext">Pick one. Drop it. Friday noon.</div>
                    <div class="banner-cta">CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(6)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 7: THE MELANIA MATH -->
                <div class="share-banner vibe-money" id="banner-7">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">AMAZON PAID $40M<br>FOR A MELANIA DOCUMENTARY.</div>
                    <div class="banner-subtext">You're paying them $14.99/month to do it.</div>
                    <div class="banner-cta">CANCEL FRIDAY · CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(7)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 8: MINNEAPOLIS -->
                <div class="share-banner vibe-crisis" id="banner-8">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">2,000 ARMED FEDERAL AGENTS.<br>3,000 ARRESTS. TWO DEAD CIVILIANS.<br>96 COURT ORDERS VIOLATED.</div>
                    <div class="banner-subtext">This is Minneapolis right now. The companies that made it possible charge you monthly.</div>
                    <div class="banner-cta">CANCEL FRIDAY · CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(8)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 9: THE BIOMETRIC DATABASE -->
                <div class="share-banner vibe-urgent" id="banner-9">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">AMAZON'S AWS STORES ICE'S DATABASE<br>OF IRIS SCANS, VOICEPRINTS, AND DNA.</div>
                    <div class="banner-subtext">Your Prime membership funds the servers.</div>
                    <div class="banner-cta">CANCEL FRIDAY · CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(9)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 10: THE INAUGURATION -->
                <div class="share-banner vibe-power" id="banner-10">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">AMAZON. GOOGLE. APPLE. OPENAI.<br>$1 MILLION EACH TO THE INAUGURATION.</div>
                    <div class="banner-subtext">That's $4 million. Your yearly subscriptions? About $600. They're using your money.</div>
                    <div class="banner-cta">CANCEL FRIDAY · CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(10)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>

                <!-- Banner 11: THE REAL COST -->
                <div class="share-banner vibe-friday" id="banner-11">
                    <div class="banner-logo">SALT</div>
                    <div class="banner-acronym">Subscribers Against Lawless Tyranny</div>
                    <div class="banner-headline">NETFLIX: $15.49/MONTH<br>SPOTIFY: $11.99/MONTH<br>AMAZON PRIME: $14.99/MONTH</div>
                    <div class="banner-subtext">ICE CONTRACTS: PRICELESS</div>
                    <div class="banner-cta">Every dollar is a vote. CANCEL FRIDAY · CANCELFRIDAY.COM</div>
                    <div class="banner-actions">
                        <button class="banner-save-btn" onclick="downloadBanner(11)">↓ DOWNLOAD</button>
                        <button class="banner-copy-btn" onclick="copyBanner(this.closest('.share-banner').id.split('-')[1])">📋 COPY</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Affiliates -->
        <section class="affiliates">
            <div class="affiliates-title">ALLIES</div>
            <div class="affiliates-links">
                <a href="https://defundbillionaires.org" target="_blank">defundbillionaires.org</a>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-badge">🔒 Anonymous · No personal data stored</div>
        </footer>
    </div>

    <!-- Story Modal -->
    <div class="modal" id="story-modal">
        <div class="story-container">
            <div class="story-preview format-story" id="story-preview">
                <div class="story-content" id="story-content">
                    <div class="story-header">
                        <div class="story-title">CANCEL FRIDAY</div>
                        <div class="story-logo">SALT</div>
                        <div class="story-acronym">Subscribers Against Lawless Tyranny</div>
                    </div>
                    <div class="story-main">
                        <div class="story-week" id="story-week">WEEK 1</div>
                        <div class="story-action" id="story-action">I'm canceling</div>
                        <div class="story-target" id="story-target">AMAZON PRIME</div>
                        <div class="story-datetime" id="story-datetime">FRI FEB 7 • 12PM EST</div>
                        <div class="story-timezone">Together. All at once.</div>
                        <div class="story-committed" id="story-committed"></div>
                    </div>
                    <div class="story-footer">
                        <div class="story-reason">They can't afford to lose us.</div>
                        <div class="story-url">cancelfriday.com</div>
                        <div class="story-hashtag">#CANCELFRIDAY</div>
                    </div>
                </div>
            </div>
            <div class="format-picker">
                <div class="format-label">FORMAT</div>
                <div class="format-options">
                    <button class="format-btn active" onclick="setStoryFormat('story')">
                        <span class="format-btn-name">STORY</span>
                        <span class="format-btn-ratio">9:16</span>
                    </button>
                    <button class="format-btn" onclick="setStoryFormat('post')">
                        <span class="format-btn-name">POST</span>
                        <span class="format-btn-ratio">1:1</span>
                    </button>
                    <button class="format-btn" onclick="setStoryFormat('banner')">
                        <span class="format-btn-name">BANNER</span>
                        <span class="format-btn-ratio">16:9</span>
                    </button>
                </div>
            </div>
            <div class="modal-actions">
                <div class="modal-actions-row">
                    <button class="modal-btn primary" onclick="saveStory()">Save Image</button>
                    <button class="modal-btn secondary" onclick="copyStory()">Copy</button>
                </div>
                <button class="modal-btn close-btn" onclick="closeStoryModal()">Close</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <!-- Image Preview Modal for Mobile -->
    <div class="image-preview-modal" id="image-preview-modal" onclick="closeImagePreview()">
        <button class="image-preview-close" onclick="closeImagePreview()">✕ CLOSE</button>
        <img id="image-preview-img" src="" alt="Banner">
        <div class="image-preview-instructions">
            HOLD DOWN ON IMAGE → SAVE TO PHOTOS
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script>
        // ============================================
        // CONFIGURATION
        // ============================================
        const SUPABASE_URL = 'https://nwrehybllhhqocyxtanf.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im53cmVoeWJsbGhocW9jeXh0YW5mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1NzAxNjksImV4cCI6MjA4NTE0NjE2OX0.EHFci8UuWxriFBA8kfluJewDlGgjcsNm2s6oMWnchwg';
        const DEMO_MODE = false; // V2 Production mode
        const THRESHOLD = 1000;
        let supabaseClient = null;

        if (!DEMO_MODE && typeof window.supabase !== 'undefined') {
            supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        }

        // ============================================
        // COMPANIES DATA WITH RECEIPTS
        // ============================================
        const COMPANIES = [
            {
                id: 'amazon-prime',
                name: 'Amazon Prime',
                parent: 'Amazon · Jeff Bezos',
                price: 14.99,
                type: 'Subscription',
                score: 10,
                receipts: [
                    { text: 'Amazon paid $75 million ($40M licensing + $35M marketing) for Melania Trump\'s vanity documentary — the most expensive documentary deal ever. Melania pocketed ~$28M', source: 'https://www.cnn.com/2026/02/01/business/melania-box-office-amazon', label: 'CNN' },
                    { text: 'Secretary of War Hegseth toured Bezos\' Blue Origin on Feb 2, telling him "plenty of winning" ahead. AWS got a $581M sole-source Air Force contract days earlier', source: 'https://www.bloomberg.com/news/articles/2026-02-02/hegseth-sees-plenty-of-winning-for-bezos-s-blue-origin', label: 'Bloomberg' },
                    { text: 'AWS is the backbone of ICE\'s deportation infrastructure — CBP runs 62% of its systems on AWS, including the HART biometric database with iris scans and DNA of hundreds of millions', source: 'https://investigate.afsc.org/company/amazon', label: 'AFSC' },
                    { text: 'Donated $1M to Trump\'s inauguration, dined at Mar-a-Lago, pitched facial recognition (Rekognition) directly to ICE for mass surveillance', source: 'https://www.thedailybeast.com/amazon-pushes-ice-to-buy-its-face-recognition-surveillance-tech/', label: 'Daily Beast' }
                ]
            },
            {
                id: 'netflix',
                name: 'Netflix',
                parent: 'Netflix Inc.',
                price: 15.49,
                type: 'Streaming',
                score: 4,
                receipts: [
                    { text: 'Co-CEO Ted Sarandos visited Trump at Mar-a-Lago in December 2024 and had an Oval Office meeting in November 2025', source: 'https://variety.com/2024/biz/news/ted-sarandos-donald-trump-netflix-mar-a-lago-1236251144/', label: 'Variety' },
                    { text: 'Sarandos is seeking Trump\'s approval for Netflix\'s $82.7 billion Warner Bros acquisition', source: 'https://variety.com/2025/biz/news/netflix-ted-sarandos-white-house-meeting-trump-warner-bros-deal-1236602831/', label: 'Variety' },
                    { text: 'Despite releasing critical content like "Immigration Nation" (which Trump tried to block), Netflix leadership is now courting the administration', source: 'https://www.thedailybeast.com/inside-netflixs-immigration-nation-the-horrifying-ice-documentary-trump-doesnt-want-you-to-see/', label: 'Daily Beast' }
                ],
                note: 'Netflix has a mixed record. They released "Immigration Nation" and "The Apprentice" biopic despite Trump pressure. Former CEO Reed Hastings called Trump\'s travel ban "anti-American." New leadership is courting Trump for business reasons.'
            },
            {
                id: 'youtube-premium',
                name: 'YouTube Premium',
                parent: 'Alphabet · Sundar Pichai',
                price: 13.99,
                type: 'Subscription',
                score: 8,
                receipts: [
                    { text: 'Google Cloud is deploying AI-powered surveillance cameras along the US-Mexico border for CBP in 2025', source: 'https://theintercept.com/2025/04/03/google-cbp-ai-border-surveillance-ibm-equitus/', label: 'The Intercept' },
                    { text: 'Google used 28+ third-party shell companies to secretly sell cloud services to ICE and CBP while publicly claiming they weren\'t', source: 'https://www.techdirt.com/2021/10/13/google-amazon-microsoft-are-using-third-party-companies-to-sell-surveillance-tech-to-ice-cbp/', label: 'Techdirt' },
                    { text: 'Google fired employees who raised concerns about the company\'s work with CBP', source: 'https://www.hstoday.us/subject-matter-areas/border-security/tensions-rise-at-google-amid-trend-of-employees-demanding-ice-cbp-contracts-be-nixed/', label: 'Homeland Security Today' },
                    { text: 'CEO Sundar Pichai met with Trump at Mar-a-Lago in December 2024', source: 'https://www.washingtonpost.com/technology/2024/12/12/zuckerberg-bezos-pichai-trump/', label: 'Washington Post' },
                    { text: '1,495 Google employees signed a petition demanding the company stop working with ICE and CBP — Google refused', source: 'https://www.cnbc.com/2019/08/19/google-employees-implore-leaders-to-stop-working-with-us-bcp-ice.html', label: 'CNBC' }
                ]
            },
            {
                id: 'spotify',
                name: 'Spotify Premium',
                parent: 'Spotify · Daniel Ek',
                price: 11.99,
                type: 'Subscription',
                score: 5,
                receipts: [
                    { text: 'Gave Joe Rogan a $250 million deal — he endorsed Trump in 2024 and hosted him for a 3-hour interview before the election', source: 'https://www.nbcnews.com/pop-culture/pop-culture-news/joe-rogan-criticizes-ice-tactics-podcast-rcna253931', label: 'NBC News' },
                    { text: 'Rogan\'s podcast has 20+ million subscribers and helped persuade young men to vote for Trump', source: 'https://www.nbcnews.com/pop-culture/pop-culture-news/joe-rogan-criticizes-ice-tactics-podcast-rcna253931', label: 'NBC News' },
                    { text: 'Spotify refused to drop Rogan despite employee protests over his use of racial slurs and misinformation', source: 'https://www.npr.org/2022/02/07/1078774392/spotifys-ceo-says-the-company-isnt-ready-to-part-ways-with-joe-rogan', label: 'NPR' }
                ],
                note: 'Rogan has recently criticized ICE as "the Gestapo" and called deportations "crazy." Spotify still profited from platforming his Trump endorsement, but this company may be reconsidered for future targeting.'
            },
            {
                id: 'chatgpt',
                name: 'ChatGPT Plus',
                parent: 'OpenAI · Sam Altman',
                price: 20.00,
                type: 'Subscription',
                score: 6,
                receipts: [
                    { text: 'Sam Altman attended Trump\'s inauguration in January 2025 and donated $1 million to the inaugural fund', source: 'https://www.cnbc.com/2025/01/09/openai-ceo-sam-altman-donates-1-million-to-trumps-inaugural-fund.html', label: 'CNBC' },
                    { text: 'OpenAI is actively seeking contracts with the US military and defense establishment', source: 'https://www.washingtonpost.com/technology/2024/10/17/openai-military-defense-pentagon/', label: 'Washington Post' },
                    { text: 'Altman met with Trump at Mar-a-Lago and has positioned OpenAI to work with the new administration', source: 'https://www.reuters.com/technology/artificial-intelligence/openai-ceo-sam-altman-donate-1-million-trumps-inaugural-fund-2025-01-09/', label: 'Reuters' }
                ]
            },
            {
                id: 'disney-plus',
                name: 'Disney+',
                parent: 'The Walt Disney Company',
                price: 13.99,
                type: 'Streaming',
                score: 6,
                receipts: [
                    { text: 'ABC News (Disney subsidiary) paid $15 million to Trump\'s presidential library to settle a defamation lawsuit', source: 'https://www.cnn.com/2024/12/19/business/disney-iger-abc-trump-nightcap', label: 'CNN' },
                    { text: 'CEO Bob Iger — a longtime Democratic donor — refused to donate to Kamala Harris in 2024, staying neutral for the first time', source: 'https://www.avclub.com/disney-bob-iger-didnt-donate-presidential-election-2024', label: 'AV Club' },
                    { text: 'Disney removed a transgender storyline from a Pixar series days after Trump\'s election victory', source: 'https://www.cnn.com/2024/12/19/business/disney-iger-abc-trump-nightcap', label: 'CNN' },
                    { text: 'Iger met with Trump in the White House to discuss Disney\'s Abu Dhabi theme park plans', source: 'https://deadline.com/2025/05/trump-bob-iger-disney-abu-dhabi-1236404813/', label: 'Deadline' },
                    { text: 'Disney pulled Jimmy Kimmel\'s show after Trump and FCC pressure over critical coverage', source: 'https://www.huffpost.com/entry/disney-bob-iger-trump-jimmy-kimmel_n_68cc16dae4b0aa8d99fe9244', label: 'HuffPost' },
                    { text: 'Marvel chairman Isaac Perlmutter donated $10.5 million to pro-Trump Super PAC in 2020', source: 'https://www.nationalreview.com/corner/the-disney-executive-who-donated-10-million-to-help-trump-in-2020/', label: 'National Review' }
                ]
            },
            {
                id: 'hulu',
                name: 'Hulu',
                parent: 'The Walt Disney Company',
                price: 17.99,
                type: 'Streaming',
                score: 6,
                receipts: [
                    { text: 'Owned by Disney — same parent company that paid $15 million to Trump\'s library and capitulated to administration pressure', source: 'https://www.cnn.com/2024/12/19/business/disney-iger-abc-trump-nightcap', label: 'CNN' },
                    { text: 'Your subscription dollars flow to the same company that pulled Jimmy Kimmel for criticizing conservatives', source: 'https://www.huffpost.com/entry/disney-bob-iger-trump-jimmy-kimmel_n_68cc16dae4b0aa8d99fe9244', label: 'HuffPost' },
                    { text: 'Profits from content featuring immigrant stories while parent company stays silent on deportations' }
                ]
            },
            {
                id: 'max',
                name: 'Max',
                parent: 'Warner Bros. Discovery',
                price: 15.99,
                type: 'Streaming',
                score: 4,
                receipts: [
                    { text: 'Warner Bros. Discovery CEO David Zaslav has maintained cozy relationships with political establishment on both sides' },
                    { text: 'CNN (same parent company) has been criticized for "both-sides" coverage that normalizes extreme immigration policies' },
                    { text: 'No public statement against ICE actions or support for immigrant communities' }
                ],
                note: 'Max has weaker documented ties than other targets. Included due to parent company\'s news operation and corporate silence. May be removed or deprioritized if stronger targets emerge.'
            },
            {
                id: 'apple-tv',
                name: 'Apple TV+',
                parent: 'Apple Inc.',
                price: 9.99,
                type: 'Streaming',
                score: 7,
                receipts: [
                    { text: 'Tim Cook dined with Trump at Mar-a-Lago in December 2024, continuing their "warm relationship" from Trump\'s first term', source: 'https://9to5mac.com/2024/12/13/cook-trump-mar-a-lago-meeting/', label: '9to5Mac' },
                    { text: 'Cook called Trump to ask for help fighting EU fines, signaling willingness to seek favors from the administration', source: 'https://appleinsider.com/articles/24/12/14/tim-cook-rumored-to-be-meeting-with-donald-trump-for-dinner-on-friday', label: 'AppleInsider' },
                    { text: 'Apple has remained completely silent on ICE deportations and immigration enforcement' },
                    { text: 'Cook met with Trump alongside 80+ CEOs before the election to discuss potential business-friendly policies', source: 'https://appleinsider.com/articles/24/12/14/tim-cook-rumored-to-be-meeting-with-donald-trump-for-dinner-on-friday', label: 'AppleInsider' }
                ]
            },
            {
                id: 'apple-music',
                name: 'Apple Music',
                parent: 'Apple Inc.',
                price: 10.99,
                type: 'Subscription',
                score: 7,
                receipts: [
                    { text: 'Same parent company as Apple TV+ — Tim Cook dined with Trump at Mar-a-Lago in December 2024', source: 'https://9to5mac.com/2024/12/13/cook-trump-mar-a-lago-meeting/', label: '9to5Mac' },
                    { text: 'Cook has maintained a "warm relationship" with Trump and asked for help fighting EU fines', source: 'https://appleinsider.com/articles/24/12/14/tim-cook-rumored-to-be-meeting-with-donald-trump-for-dinner-on-friday', label: 'AppleInsider' },
                    { text: 'Apple has remained completely silent on ICE deportations and immigration enforcement' }
                ]
            },
            {
                id: 'paramount',
                name: 'Paramount+',
                parent: 'Paramount · Shari Redstone',
                price: 12.99,
                type: 'Streaming',
                score: 4,
                receipts: [
                    { text: 'CBS News (Paramount subsidiary) killed a 60 Minutes segment on ICE deportations to El Salvador prisons — it only aired in Canada', source: 'https://deadline.com/2026/01/trump-against-netflix-warner-bros-deal-1236679318/', label: 'Deadline' },
                    { text: 'New CBS News editor axed the already-greenlit segment claiming it needed to be "fair" to the White House', source: 'https://deadline.com/2026/01/trump-against-netflix-warner-bros-deal-1236679318/', label: 'Deadline' },
                    { text: 'Owner Shari Redstone makes political donations across the spectrum, prioritizing business relationships over principles' }
                ]
            },
            {
                id: 'peacock',
                name: 'Peacock',
                parent: 'NBCUniversal · Comcast',
                price: 7.99,
                type: 'Streaming',
                score: 4,
                receipts: [
                    { text: 'NBC News has been criticized for normalizing Trump coverage and providing him with softball town halls', source: 'https://www.theguardian.com/media/2020/oct/16/nbc-trump-town-hall-backlash-election', label: 'The Guardian' },
                    { text: 'Comcast (parent company) is one of the largest lobbying spenders in Washington', source: 'https://www.opensecrets.org/federal-lobbying/clients/summary?id=D000000461', label: 'OpenSecrets' },
                    { text: 'No public statement against ICE actions or immigration enforcement from NBC/Comcast leadership' }
                ]
            },
            {
                id: 'meta',
                name: 'Meta Verified',
                parent: 'Meta · Mark Zuckerberg',
                price: 11.99,
                type: 'Subscription',
                score: 8,
                receipts: [
                    { text: 'Mark Zuckerberg dined with Trump at Mar-a-Lago in November 2024 before the election results', source: 'https://www.nytimes.com/2024/11/13/technology/mark-zuckerberg-donald-trump-meeting.html', label: 'NY Times' },
                    { text: 'Meta donated $1 million to Trump\'s 2025 inauguration fund', source: 'https://www.cnbc.com/2025/01/09/meta-donates-1-million-to-trump-inauguration-fund.html', label: 'CNBC' },
                    { text: 'Zuckerberg ended fact-checking on Facebook and Instagram, calling it "censorship"', source: 'https://www.bbc.com/news/articles/c5y53jnpq79o', label: 'BBC' },
                    { text: 'Facebook was the primary platform for spreading election misinformation in 2016 and 2020' }
                ]
            },
            {
                id: 'uber-one',
                name: 'Uber One',
                parent: 'Uber Technologies',
                price: 9.99,
                type: 'Convenience',
                score: 5,
                receipts: [
                    { text: 'Former CEO Travis Kalanick served on Trump\'s business advisory council in 2017 before resigning after #DeleteUber boycotts', source: 'https://money.cnn.com/2017/08/29/technology/business/uber-ceo-trump/index.html', label: 'CNN Money' },
                    { text: 'Current CEO Dara Khosrowshahi (an Iranian refugee) has softened his Trump criticism, recently calling the administration "pro-growth, pro-business"', source: 'https://www.cbsnews.com/news/uber-ceo-dara-khosrowshahi-on-being-behind-the-wheel/', label: 'CBS News' },
                    { text: 'Uber spent $200+ million fighting Proposition 22 to deny gig workers (many immigrants) basic employment protections' },
                    { text: 'Exploits immigrant labor force — many drivers are immigrants working without benefits, healthcare, or job security' }
                ]
            },
            {
                id: 'dashpass',
                name: 'DashPass',
                parent: 'DoorDash Inc.',
                price: 9.99,
                type: 'Convenience',
                score: 3,
                receipts: [
                    { text: 'Exploits gig workers — many Dashers are immigrants working without benefits, sick leave, or job security' },
                    { text: 'Spent millions lobbying against worker protection laws like Proposition 22 in California' },
                    { text: 'No public stance on immigration despite relying heavily on immigrant labor for deliveries' }
                ],
                note: 'DoorDash has no direct Trump/ICE ties. Included for labor exploitation angle. Lowest priority target — may be replaced with companies showing stronger documented complicity.'
            },
            {
                id: 'tesla',
                name: 'Tesla Premium',
                parent: 'Tesla · Elon Musk',
                price: 9.99,
                type: 'Subscription',
                score: 10,
                receipts: [
                    { text: 'Elon Musk spent $250+ million to elect Trump in 2024 and now runs the "Department of Government Efficiency"', source: 'https://www.nytimes.com/2024/10/15/us/politics/elon-musk-trump-spending.html', label: 'NY Times' },
                    { text: 'Musk has been at Trump\'s side constantly since the election, attending Mar-a-Lago dinners and policy meetings', source: 'https://www.washingtonpost.com/politics/2024/12/19/trump-bezos-musk-dinner/', label: 'Washington Post' },
                    { text: 'Musk has amplified anti-immigrant rhetoric and conspiracy theories on X (Twitter)', source: 'https://www.nbcnews.com/tech/misinformation/elon-musks-x-posts-helped-spread-misinformation-about-immigrants-rcna171246', label: 'NBC News' },
                    { text: 'Tesla relies on federal EV tax credits while Musk works to dismantle other government programs' }
                ]
            },
        ];

        // ============================================
        // WEEK CONFIGURATION
        // ============================================
        const WEEK_DATA = {
            week_number: 1,
            drop_time: '2026-02-13T17:00:00Z', // Friday Feb 13 noon EST = 5pm UTC
        };

        // ============================================
        // FINGERPRINT
        // ============================================
        function generateFingerprint() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            ctx.textBaseline = 'top';
            ctx.font = '14px Arial';
            ctx.fillText('salt', 2, 2);
            const canvasData = canvas.toDataURL();

            const data = [
                navigator.userAgent,
                navigator.language,
                screen.width + 'x' + screen.height,
                new Date().getTimezoneOffset(),
                canvasData.slice(-50)
            ].join('|');

            let hash = 0;
            for (let i = 0; i < data.length; i++) {
                const char = data.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return Math.abs(hash).toString(36);
        }

        const FINGERPRINT = generateFingerprint();

        // ============================================
        // STATE
        // ============================================
        let commitCounts = {}; // { companyId: count }
        let confirmCounts = {}; // { companyId: count } - people who confirmed they cancelled
        let userCommits = []; // Array of company IDs user committed to
        let userConfirmed = []; // Array of company IDs user confirmed they cancelled
        let selectedCompany = null; // Currently selected company for detail view
        let leaderId = null;
        let currentPhase = 'PRE_FRIDAY'; // PRE_FRIDAY, FRIDAY, POST_FRIDAY
        let debugPhaseOverride = null; // For testing

        // ============================================
        // PHASE DETECTION
        // ============================================
        function getCurrentPhase() {
            if (debugPhaseOverride) return debugPhaseOverride;

            const now = new Date();
            const dropTime = new Date(WEEK_DATA.drop_time);
            const postFridayTime = new Date(dropTime.getTime() + (12 * 60 * 60 * 1000)); // 12 hours after drop

            if (now < dropTime) {
                return 'PRE_FRIDAY';
            } else if (now < postFridayTime) {
                return 'FRIDAY';
            } else {
                return 'POST_FRIDAY';
            }
        }

        // ============================================
        // LOCAL STORAGE
        // ============================================
        function loadLocalState() {
            const stored = localStorage.getItem('salt_scoreboard_v2');
            if (stored) {
                const data = JSON.parse(stored);
                if (data.week === WEEK_DATA.week_number) {
                    userCommits = data.userCommits || [];
                    userConfirmed = data.userConfirmed || [];
                }
            }
        }

        function saveLocalState() {
            localStorage.setItem('salt_scoreboard_v2', JSON.stringify({
                week: WEEK_DATA.week_number,
                userCommits: userCommits,
                userConfirmed: userConfirmed
            }));
        }

        // ============================================
        // DEMO DATA
        // ============================================
        function getDemoData() {
            const stored = localStorage.getItem('salt_scoreboard_demo_v2');
            if (stored) {
                const data = JSON.parse(stored);
                if (data.week === WEEK_DATA.week_number) {
                    return data;
                }
            }

            // Initialize with some demo counts
            const initial = {
                week: WEEK_DATA.week_number,
                counts: {},
                confirms: {}
            };

            // Start with varied counts for demo
            COMPANIES.forEach((c, i) => {
                initial.counts[c.id] = Math.floor(Math.random() * 200) + 10;
                initial.confirms[c.id] = 0;
            });
            // Make amazon-prime the leader
            initial.counts['amazon-prime'] = 420;
            initial.counts['chatgpt'] = 312;
            initial.counts['netflix'] = 287;

            saveDemoData(initial);
            return initial;
        }

        function saveDemoData(data) {
            localStorage.setItem('salt_scoreboard_demo_v2', JSON.stringify(data));
        }

        // ============================================
        // DATA LOADING
        // ============================================
        async function loadData() {
            loadLocalState();
            currentPhase = getCurrentPhase();

            if (DEMO_MODE) {
                console.log('🧂 SALT Scoreboard - DEMO MODE - Phase:', currentPhase);
                const demo = getDemoData();
                commitCounts = demo.counts;
                confirmCounts = demo.confirms || {};
                render();
                hideLoading();
                return;
            }

            // Supabase mode
            console.log('🧂 SALT Scoreboard - LIVE MODE - Phase:', currentPhase);
            try {
                // Load commit counts for this week
                const { data: countsData, error: countsError } = await supabaseClient
                    .from('v2_commits')
                    .select('company_id')
                    .eq('week_number', WEEK_DATA.week_number);

                if (countsError) throw countsError;

                // Aggregate counts
                commitCounts = {};
                countsData.forEach(row => {
                    commitCounts[row.company_id] = (commitCounts[row.company_id] || 0) + 1;
                });

                // Load confirm counts
                const { data: confirmsData, error: confirmsError } = await supabaseClient
                    .from('v2_commits')
                    .select('company_id')
                    .eq('week_number', WEEK_DATA.week_number)
                    .not('confirmed_at', 'is', null);

                if (!confirmsError && confirmsData) {
                    confirmCounts = {};
                    confirmsData.forEach(row => {
                        confirmCounts[row.company_id] = (confirmCounts[row.company_id] || 0) + 1;
                    });
                }

                // Load user's commits for this week
                const { data: userCommitsData, error: userError } = await supabaseClient
                    .from('v2_commits')
                    .select('company_id, confirmed_at')
                    .eq('week_number', WEEK_DATA.week_number)
                    .eq('fingerprint_hash', FINGERPRINT);

                if (!userError && userCommitsData) {
                    userCommits = userCommitsData.map(row => row.company_id);
                    userConfirmed = userCommitsData
                        .filter(row => row.confirmed_at)
                        .map(row => row.company_id);
                }

                // Subscribe to realtime updates
                supabaseClient
                    .channel('v2-commits')
                    .on('postgres_changes', {
                        event: '*',
                        schema: 'public',
                        table: 'v2_commits',
                        filter: `week_number=eq.${WEEK_DATA.week_number}`
                    }, async () => {
                        // Reload counts on any change
                        const { data } = await supabaseClient
                            .from('v2_commits')
                            .select('company_id, confirmed_at')
                            .eq('week_number', WEEK_DATA.week_number);

                        if (data) {
                            commitCounts = {};
                            confirmCounts = {};
                            data.forEach(row => {
                                commitCounts[row.company_id] = (commitCounts[row.company_id] || 0) + 1;
                                if (row.confirmed_at) {
                                    confirmCounts[row.company_id] = (confirmCounts[row.company_id] || 0) + 1;
                                }
                            });
                            render();
                        }
                    })
                    .subscribe();

                render();
                hideLoading();
            } catch (err) {
                console.error('Supabase error:', err);
                showToast('Connection error. Using local data.', true);
                // Fallback to demo data
                const demo = getDemoData();
                commitCounts = demo.counts;
                confirmCounts = demo.confirms || {};
                render();
                hideLoading();
            }
        }

        // ============================================
        // ACTIONS
        // ============================================
        async function toggleCommit(companyId) {
            const index = userCommits.indexOf(companyId);

            if (index === -1) {
                // Add commitment
                userCommits.push(companyId);
                commitCounts[companyId] = (commitCounts[companyId] || 0) + 1;

                if (DEMO_MODE) {
                    const demo = getDemoData();
                    demo.counts[companyId] = commitCounts[companyId];
                    saveDemoData(demo);
                } else if (supabaseClient) {
                    // Insert into Supabase
                    const { error } = await supabaseClient
                        .from('v2_commits')
                        .insert({
                            fingerprint_hash: FINGERPRINT,
                            company_id: companyId,
                            week_number: WEEK_DATA.week_number
                        });
                    if (error) console.error('Commit error:', error);
                }

                const company = COMPANIES.find(c => c.id === companyId);
                showToast(`Committed to cancel ${company.name}! Tap "Share" below.`);

                // Scroll to user commits section after a moment to show share option
                setTimeout(() => {
                    const userSection = document.getElementById('user-commits-section');
                    if (userSection) {
                        userSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 500);
            } else {
                // Remove commitment
                userCommits.splice(index, 1);
                commitCounts[companyId] = Math.max((commitCounts[companyId] || 1) - 1, 0);

                if (DEMO_MODE) {
                    const demo = getDemoData();
                    demo.counts[companyId] = commitCounts[companyId];
                    saveDemoData(demo);
                } else if (supabaseClient) {
                    // Delete from Supabase
                    const { error } = await supabaseClient
                        .from('v2_commits')
                        .delete()
                        .eq('fingerprint_hash', FINGERPRINT)
                        .eq('company_id', companyId)
                        .eq('week_number', WEEK_DATA.week_number);
                    if (error) console.error('Delete error:', error);
                }

                showToast('Commitment removed.');
            }

            saveLocalState();
            render();
        }

        // Select a company to show details
        function selectCompany(companyId) {
            selectedCompany = companyId;
            render();

            // Scroll to detail section
            setTimeout(() => {
                const detailEl = document.getElementById('detail-section');
                if (detailEl) {
                    detailEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 50);
        }

        // Confirm that user actually cancelled (Friday only)
        async function confirmCancellation(companyId) {
            if (userConfirmed.includes(companyId)) {
                showToast('Already confirmed!');
                return;
            }

            userConfirmed.push(companyId);
            confirmCounts[companyId] = (confirmCounts[companyId] || 0) + 1;

            if (DEMO_MODE) {
                const demo = getDemoData();
                demo.confirms = demo.confirms || {};
                demo.confirms[companyId] = confirmCounts[companyId];
                saveDemoData(demo);
            } else if (supabaseClient) {
                // Update confirmed_at in Supabase
                const { error } = await supabaseClient
                    .from('v2_commits')
                    .update({ confirmed_at: new Date().toISOString() })
                    .eq('fingerprint_hash', FINGERPRINT)
                    .eq('company_id', companyId)
                    .eq('week_number', WEEK_DATA.week_number);
                if (error) console.error('Confirm error:', error);
            }

            saveLocalState();

            const company = COMPANIES.find(c => c.id === companyId);
            showToast(`${company.name} cancelled! 🎉`);
            render();
        }

        // ============================================
        // EMAIL SIGNUP
        // ============================================
        async function submitEmail(e) {
            e.preventDefault();
            const input = document.getElementById('email-input');
            const btn = document.getElementById('email-btn');
            const email = input.value.trim();

            if (!email) return;

            btn.disabled = true;
            btn.textContent = 'JOINING...';

            // TODO: Save to Supabase email_signups table
            // For now, just simulate
            await new Promise(r => setTimeout(r, 500));

            showToast('You\'re in! See you Friday.');
            input.value = '';
            btn.textContent = 'JOINED ✓';
            btn.disabled = true;
        }

        // ============================================
        // COUNTDOWN
        // ============================================
        function updateCountdown() {
            const now = new Date();
            const target = new Date(WEEK_DATA.drop_time);
            const diff = target - now;

            const el = document.getElementById('countdown-timer');
            if (!el) return;

            if (diff <= 0) {
                if (diff > -3600000) {
                    el.innerHTML = '<span class="countdown-done">IT\'S TIME — CANCEL NOW</span>';
                } else {
                    el.innerHTML = '<span class="countdown-done">IN PROGRESS</span>';
                }
                return;
            }

            const d = Math.floor(diff / 86400000);
            const h = Math.floor((diff % 86400000) / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);

            el.innerHTML =
                `<span class="cd-unit">${d}<span class="cd-label">days</span></span>` +
                `<span class="cd-sep">:</span>` +
                `<span class="cd-unit">${String(h).padStart(2,'0')}<span class="cd-label">hrs</span></span>` +
                `<span class="cd-sep">:</span>` +
                `<span class="cd-unit">${String(m).padStart(2,'0')}<span class="cd-label">min</span></span>` +
                `<span class="cd-sep">:</span>` +
                `<span class="cd-unit">${String(s).padStart(2,'0')}<span class="cd-label">sec</span></span>`;
        }

        // ============================================
        // RENDER
        // ============================================
        function render() {
            // Update week badge
            document.getElementById('week-number').textContent = WEEK_DATA.week_number;

            // Sort companies by commit count
            const sorted = [...COMPANIES].sort((a, b) => {
                return (commitCounts[b.id] || 0) - (commitCounts[a.id] || 0);
            });

            const leader = sorted[0];
            leaderId = leader.id;
            const leaderCount = commitCounts[leader.id] || 0;
            const maxCount = leaderCount || 1;

            // Calculate totals
            const totalCommits = Object.values(commitCounts).reduce((sum, c) => sum + c, 0);
            const totalAnnualImpact = COMPANIES.reduce((sum, c) => {
                return sum + (commitCounts[c.id] || 0) * c.price * 12;
            }, 0);

            // Update combined stats box
            const thresholdPct = Math.min((totalCommits / THRESHOLD) * 100, 100);
            const thresholdHit = totalCommits >= THRESHOLD;
            const activeCompanies = COMPANIES.filter(c => (commitCounts[c.id] || 0) > 0).length;

            // Count
            document.getElementById('stats-count').textContent = totalCommits.toLocaleString();

            // Progress bar
            document.getElementById('stats-progress-fill').style.width = `${thresholdPct}%`;
            const progressText = document.getElementById('stats-progress-text');
            const progressSection = document.querySelector('.stats-progress');

            if (thresholdHit) {
                progressSection.classList.add('hit');
                progressText.textContent = `${totalCommits.toLocaleString()} / ${THRESHOLD.toLocaleString()}`;
            } else {
                progressSection.classList.remove('hit');
                progressText.textContent = `${totalCommits.toLocaleString()} / ${THRESHOLD.toLocaleString()} · ${(THRESHOLD - totalCommits).toLocaleString()} more to go`;
            }

            // Impact amount
            document.getElementById('stats-impact-amount').textContent = `$${totalAnnualImpact.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;

            // Companies count
            document.getElementById('stats-companies').textContent = activeCompanies > 0
                ? `across ${activeCompanies} ${activeCompanies === 1 ? 'company' : 'companies'}`
                : '';

            // Update scoreboard section state
            const scoreboardSection = document.querySelector('.scoreboard-section');
            if (thresholdHit) {
                scoreboardSection.classList.remove('pre-threshold');
                scoreboardSection.classList.add('active');
            } else {
                scoreboardSection.classList.add('pre-threshold');
                scoreboardSection.classList.remove('active');
            }

            // Leader banner
            document.getElementById('leader-name').textContent = leader.name.toUpperCase();
            document.getElementById('leader-count').textContent = `${leaderCount.toLocaleString()} committed`;
            document.getElementById('leader-banner').onclick = () => selectCompany(leader.id);

            // Company grid - ALL companies including leader
            const gridHtml = sorted.map(company => {
                const count = commitCounts[company.id] || 0;
                const pct = maxCount > 0 ? (count / maxCount) * 100 : 0;
                const isCommitted = userCommits.includes(company.id);
                const isSelected = selectedCompany === company.id;
                const isLeader = company.id === leader.id;
                const scoreTier = company.score >= 7 ? 'score-high' : company.score >= 5 ? 'score-mid' : 'score-low';

                return `
                    <div class="company-card ${isCommitted ? 'committed' : ''} ${isSelected ? 'selected' : ''} ${isLeader ? 'leader' : ''}"
                         onclick="selectCompany('${company.id}')">
                        <div class="score-badge ${scoreTier}">${company.score}/10</div>
                        <div class="company-name">${company.name}</div>
                        <div class="company-parent">${company.parent}</div>
                        <div class="vote-bar">
                            <div class="vote-fill" style="width: ${pct}%"></div>
                        </div>
                        <div class="vote-count">${count.toLocaleString()} committed</div>
                    </div>
                `;
            }).join('');

            document.getElementById('company-grid').innerHTML = gridHtml;

            // Details indicator
            const indicator = document.getElementById('details-indicator');
            indicator.classList.toggle('hidden', !selectedCompany);

            // Detail section
            const detailSection = document.getElementById('detail-section');
            if (selectedCompany) {
                const company = COMPANIES.find(c => c.id === selectedCompany);
                if (company) {
                    const count = commitCounts[company.id] || 0;
                    const isCommitted = userCommits.includes(company.id);
                    const annualImpact = count * company.price * 12;

                    detailSection.classList.remove('hidden');
                    document.getElementById('detail-name').textContent = company.name.toUpperCase();
                    document.getElementById('detail-parent').textContent = company.parent;
                    document.getElementById('detail-committed').textContent = count.toLocaleString();
                    document.getElementById('detail-impact').textContent = '$' + formatMoney(annualImpact);
                    document.getElementById('detail-price').textContent = `$${company.price}/month · $${(company.price * 12).toFixed(0)}/year`;

                    // Why box
                    const receiptsHtml = company.receipts ? company.receipts.map(r => `
                        <li>
                            ${r.text}
                            ${r.source ? `<a href="${r.source}" target="_blank" rel="noopener" class="source-link">[${r.label}]</a>` : ''}
                        </li>
                    `).join('') : '';

                    const noteHtml = company.note ? `
                        <div class="why-note">
                            <strong>Note:</strong> ${company.note}
                        </div>
                    ` : '';

                    document.getElementById('why-box').innerHTML = `
                        <div class="why-title">WHY ${company.name.toUpperCase()}?</div>
                        <ul class="why-list">${receiptsHtml}</ul>
                        ${noteHtml}
                    `;

                    // Commit button
                    const commitBtn = document.getElementById('detail-commit-btn');
                    commitBtn.className = `detail-commit-btn ${isCommitted ? 'committed' : 'commit'}`;
                    commitBtn.textContent = isCommitted ? 'COMMITTED ✓' : "I'M CANCELLING THIS";
                    commitBtn.onclick = () => toggleCommit(company.id);
                }
            } else {
                detailSection.classList.add('hidden');
            }

            // Update phase
            currentPhase = getCurrentPhase();

            // Apply Friday mode to body
            if (currentPhase === 'FRIDAY') {
                document.body.classList.add('friday-mode');
            } else {
                document.body.classList.remove('friday-mode');
            }

            // User commits section - phase aware
            const userSection = document.getElementById('user-commits-section');
            if (userCommits.length > 0) {
                userSection.classList.remove('hidden');

                // Apply Friday mode styling
                if (currentPhase === 'FRIDAY') {
                    userSection.classList.add('friday-mode');
                } else {
                    userSection.classList.remove('friday-mode');
                }

                const userMonthly = userCommits.reduce((sum, id) => {
                    const company = COMPANIES.find(c => c.id === id);
                    return sum + (company ? company.price : 0);
                }, 0);
                const userAnnual = userMonthly * 12;

                // Different UI based on phase
                if (currentPhase === 'FRIDAY') {
                    // Friday: Show confirmation buttons
                    document.querySelector('.user-commits-title').textContent = 'CANCEL NOW — CONFIRM EACH ONE';

                    const actionsHtml = userCommits.map(id => {
                        const company = COMPANIES.find(c => c.id === id);
                        const isConfirmed = userConfirmed.includes(id);
                        return `
                            <div class="commit-action-row">
                                <div>
                                    <div class="commit-action-name">${company ? company.name : id}</div>
                                    <div class="commit-action-status ${isConfirmed ? 'confirmed' : ''}">
                                        ${isConfirmed ? '✓ Cancelled!' : 'Waiting for confirmation'}
                                    </div>
                                </div>
                                <button class="confirm-btn ${isConfirmed ? 'done' : 'pending'}"
                                        onclick="event.stopPropagation(); ${isConfirmed ? '' : `confirmCancellation('${id}')`}"
                                        ${isConfirmed ? 'disabled' : ''}>
                                    ${isConfirmed ? 'DONE ✓' : 'I CANCELLED'}
                                </button>
                            </div>
                        `;
                    }).join('');

                    document.getElementById('user-commits-list').innerHTML = actionsHtml;

                    const confirmedCount = userConfirmed.length;
                    const totalCount = userCommits.length;
                    document.getElementById('user-commits-impact').textContent =
                        `${confirmedCount}/${totalCount} confirmed · $${userMonthly.toFixed(2)}/month saved`;
                } else if (currentPhase === 'POST_FRIDAY') {
                    // Post-Friday: Show results
                    document.querySelector('.user-commits-title').textContent = 'YOUR CANCELLATIONS THIS WEEK';

                    const resultsHtml = userCommits.map(id => {
                        const company = COMPANIES.find(c => c.id === id);
                        const isConfirmed = userConfirmed.includes(id);
                        return `
                            <div class="commit-action-row">
                                <div class="commit-action-name">${company ? company.name : id}</div>
                                <div class="commit-action-status ${isConfirmed ? 'confirmed' : ''}">
                                    ${isConfirmed ? '✓ Cancelled' : '○ Not confirmed'}
                                </div>
                            </div>
                        `;
                    }).join('');

                    document.getElementById('user-commits-list').innerHTML = resultsHtml;
                    document.getElementById('user-commits-impact').textContent =
                        `You cut $${userMonthly.toFixed(2)}/month · $${userAnnual.toFixed(2)}/year`;
                } else {
                    // Pre-Friday: Show chips with remove option
                    document.querySelector('.user-commits-title').textContent = 'YOUR FRIDAY CANCELLATIONS';

                    const chipsHtml = userCommits.map(id => {
                        const company = COMPANIES.find(c => c.id === id);
                        return `
                            <div class="user-commit-chip">
                                ${company ? company.name : id}
                                <span class="user-commit-remove" onclick="event.stopPropagation(); toggleCommit('${id}')">×</span>
                            </div>
                        `;
                    }).join('');

                    document.getElementById('user-commits-list').innerHTML = chipsHtml;
                    document.getElementById('user-commits-impact').textContent =
                        `You're cutting $${userMonthly.toFixed(2)}/month · $${userAnnual.toFixed(2)}/year`;
                }
            } else {
                userSection.classList.add('hidden');
            }

            // Update countdown label based on phase
            const countdownLabel = document.querySelector('.countdown-label');
            if (currentPhase === 'FRIDAY') {
                countdownLabel.textContent = 'IT\'S TIME — CANCEL NOW';
            } else if (currentPhase === 'POST_FRIDAY') {
                countdownLabel.textContent = 'CANCEL FRIDAY COMPLETE';
            } else {
                countdownLabel.textContent = 'FRIDAY AT NOON EST. WE MOVE.';
            }
        }

        function formatMoney(amount) {
            if (amount >= 1000000) {
                return (amount / 1000000).toFixed(1) + 'M';
            } else if (amount >= 1000) {
                return (amount / 1000).toFixed(0) + 'K';
            }
            return amount.toFixed(0);
        }

        // ============================================
        // SHARE
        // ============================================
        function shareCommits() {
            const companyNames = userCommits.map(id => {
                const company = COMPANIES.find(c => c.id === id);
                return company ? company.name : id;
            });

            const text = `I'm cancelling ${companyNames.join(', ')} this Friday.\n\nJoin me: cancelfriday.com\n#CancelFriday #SALT`;

            if (navigator.share) {
                navigator.share({
                    title: 'Cancel Friday',
                    text: text,
                    url: 'https://cancelfriday.com'
                });
            } else {
                navigator.clipboard.writeText(text);
                showToast('Copied to clipboard!');
            }
        }

        // ============================================
        // STORY MODAL
        // ============================================
        let currentStoryFormat = 'story';

        const STORY_FORMATS = {
            story: { width: 270, height: 480, exportWidth: 1080, exportHeight: 1920 },
            post: { width: 300, height: 300, exportWidth: 1080, exportHeight: 1080 },
            banner: { width: 360, height: 203, exportWidth: 1600, exportHeight: 900 }
        };

        function setStoryFormat(format) {
            currentStoryFormat = format;

            // Update button states
            document.querySelectorAll('.format-btn').forEach(btn => btn.classList.remove('active'));
            event.target.closest('.format-btn').classList.add('active');

            // Update preview container class
            const preview = document.getElementById('story-preview');
            preview.className = `story-preview format-${format}`;

            // Update content class for layout adjustments
            const content = document.getElementById('story-content');
            content.className = `story-content format-${format}`;
        }

        function openStoryModal() {
            // Reset to default format
            currentStoryFormat = 'story';
            document.querySelectorAll('.format-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector('.format-btn').classList.add('active');
            document.getElementById('story-preview').className = 'story-preview format-story';
            document.getElementById('story-content').className = 'story-content';

            updateStoryContent();
            document.getElementById('story-modal').classList.add('active');
        }

        function closeStoryModal() {
            document.getElementById('story-modal').classList.remove('active');
        }

        function updateStoryContent() {
            // Get the companies user is cancelling
            const companyNames = userCommits.map(id => {
                const company = COMPANIES.find(c => c.id === id);
                return company ? company.name : id;
            });

            // Update story content
            document.getElementById('story-week').textContent = `WEEK ${WEEK_DATA.week_number}`;

            const storyTarget = document.getElementById('story-target');
            storyTarget.classList.remove('multi');

            if (companyNames.length === 0) {
                storyTarget.textContent = 'JOIN US';
                document.getElementById('story-action').textContent = 'Cancel something';
            } else if (companyNames.length === 1) {
                storyTarget.textContent = companyNames[0].toUpperCase();
                document.getElementById('story-action').textContent = 'I\'m canceling';
            } else if (companyNames.length === 2) {
                storyTarget.textContent = companyNames.map(n => n.toUpperCase()).join(' + ');
                storyTarget.classList.add('multi');
                document.getElementById('story-action').textContent = 'I\'m canceling';
            } else {
                storyTarget.textContent = `${companyNames.length} SUBSCRIPTIONS`;
                document.getElementById('story-action').textContent = 'I\'m canceling';
            }

            // Format date
            const dropDate = new Date(WEEK_DATA.drop_time);
            const options = { weekday: 'short', month: 'short', day: 'numeric' };
            const dateStr = dropDate.toLocaleDateString('en-US', options).toUpperCase();
            document.getElementById('story-datetime').textContent = `${dateStr} • 12PM EST`;

            // Total committed
            const totalCommits = Object.values(commitCounts).reduce((sum, c) => sum + c, 0);
            document.getElementById('story-committed').textContent = `${totalCommits.toLocaleString()} of us doing this together.`;
        }

        async function getStoryCanvas() {
            const storyContent = document.getElementById('story-content');
            const format = STORY_FORMATS[currentStoryFormat];

            // Calculate scale to get export resolution
            const scale = format.exportWidth / format.width;

            return await html2canvas(storyContent, {
                backgroundColor: '#0a0a0a',
                scale: scale,
                width: format.width,
                height: format.height
            });
        }

        async function getStoryBlob() {
            const canvas = await getStoryCanvas();
            return new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
        }

        async function saveStory() {
            try {
                const canvas = await getStoryCanvas();
                const dataUrl = canvas.toDataURL('image/png');

                if (isMobile()) {
                    // On mobile, show image in modal for long-press save
                    closeStoryModal();
                    showImagePreview(dataUrl);
                } else {
                    // On desktop, download directly
                    const link = document.createElement('a');
                    link.download = `cancelfriday-week${WEEK_DATA.week_number}-${currentStoryFormat}.png`;
                    link.href = dataUrl;
                    link.click();
                    showToast('Saved! Share it everywhere.');
                }
            } catch (err) {
                showToast('Save failed. Try screenshot.', true);
            }
        }

        async function copyStory() {
            try {
                const blob = await getStoryBlob();
                await navigator.clipboard.write([
                    new ClipboardItem({ 'image/png': blob })
                ]);
                showToast('Copied! Paste anywhere.');
            } catch (err) {
                showToast('Copy failed. Try Save instead.', true);
            }
        }

        // ============================================
        // BANNER SAVE
        // ============================================
        let currentBannerFormat = 'story';

        const BANNER_FORMATS = {
            story: { width: 202, height: 360, exportWidth: 1080, exportHeight: 1920 },
            post: { width: 270, height: 270, exportWidth: 1080, exportHeight: 1080 },
            banner: { width: 320, height: 180, exportWidth: 1600, exportHeight: 900 }
        };

        function setBannerFormat(format, btn) {
            currentBannerFormat = format;

            // Update button states
            document.querySelectorAll('.banner-format-picker .format-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function isMobile() {
            return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth <= 768;
        }

        async function downloadBanner(bannerNum) {
            const banner = document.getElementById(`banner-${bannerNum}`);
            const actions = banner.querySelector('.banner-actions');
            const format = BANNER_FORMATS[currentBannerFormat];

            actions.style.display = 'none';

            const origWidth = banner.style.width;
            const origHeight = banner.style.height;
            const origMinWidth = banner.style.minWidth;
            banner.style.width = format.width + 'px';
            banner.style.height = format.height + 'px';
            banner.style.minWidth = format.width + 'px';

            try {
                const scale = format.exportWidth / format.width;
                const canvas = await html2canvas(banner, {
                    backgroundColor: '#0a0a0a',
                    scale: scale,
                    width: format.width,
                    height: format.height
                });

                banner.style.width = origWidth;
                banner.style.height = origHeight;
                banner.style.minWidth = origMinWidth;
                actions.style.display = 'flex';

                const dataUrl = canvas.toDataURL('image/png');

                if (isMobile()) {
                    // On mobile, show image in modal for long-press save
                    showImagePreview(dataUrl);
                } else {
                    // On desktop, download directly
                    const link = document.createElement('a');
                    link.download = `cancelfriday-banner-${bannerNum}-${currentBannerFormat}.png`;
                    link.href = dataUrl;
                    link.click();
                    showToast('Downloaded! Share it everywhere.');
                }
            } catch (err) {
                banner.style.width = origWidth;
                banner.style.height = origHeight;
                banner.style.minWidth = origMinWidth;
                actions.style.display = 'flex';
                showToast('Download failed. Try screenshot.', true);
            }
        }

        function showImagePreview(dataUrl) {
            const modal = document.getElementById('image-preview-modal');
            const img = document.getElementById('image-preview-img');
            img.src = dataUrl;
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeImagePreview() {
            const modal = document.getElementById('image-preview-modal');
            modal.classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyBanner(bannerNum) {
            const banner = document.getElementById(`banner-${bannerNum}`);
            const actions = banner.querySelector('.banner-actions');
            const format = BANNER_FORMATS[currentBannerFormat];

            actions.style.display = 'none';

            const origWidth = banner.style.width;
            const origHeight = banner.style.height;
            const origMinWidth = banner.style.minWidth;
            banner.style.width = format.width + 'px';
            banner.style.height = format.height + 'px';
            banner.style.minWidth = format.width + 'px';

            try {
                const scale = format.exportWidth / format.width;
                const canvas = await html2canvas(banner, {
                    backgroundColor: '#0a0a0a',
                    scale: scale,
                    width: format.width,
                    height: format.height
                });

                banner.style.width = origWidth;
                banner.style.height = origHeight;
                banner.style.minWidth = origMinWidth;
                actions.style.display = 'flex';

                const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
                await navigator.clipboard.write([
                    new ClipboardItem({ 'image/png': blob })
                ]);
                showToast('Copied to clipboard!');
            } catch (err) {
                banner.style.width = origWidth;
                banner.style.height = origHeight;
                banner.style.minWidth = origMinWidth;
                actions.style.display = 'flex';
                showToast('Copy failed. Try download instead.', true);
            }
        }

        async function downloadAllBanners() {
            showToast('Downloading all banners...');
            for (let i = 1; i <= 11; i++) {
                await saveBannerDirect(i);
                // Small delay between downloads
                await new Promise(r => setTimeout(r, 300));
            }
            showToast('All banners saved!');
        }

        async function saveBannerDirect(bannerNum) {
            const banner = document.getElementById(`banner-${bannerNum}`);
            const actions = banner.querySelector('.banner-actions');
            const format = BANNER_FORMATS[currentBannerFormat];

            actions.style.display = 'none';

            const origWidth = banner.style.width;
            const origHeight = banner.style.height;
            const origMinWidth = banner.style.minWidth;
            banner.style.width = format.width + 'px';
            banner.style.height = format.height + 'px';
            banner.style.minWidth = format.width + 'px';

            try {
                const scale = format.exportWidth / format.width;
                const canvas = await html2canvas(banner, {
                    backgroundColor: '#0a0a0a',
                    scale: scale,
                    width: format.width,
                    height: format.height
                });

                banner.style.width = origWidth;
                banner.style.height = origHeight;
                banner.style.minWidth = origMinWidth;
                actions.style.display = 'flex';

                const link = document.createElement('a');
                link.download = `cancelfriday-banner-${bannerNum}-${currentBannerFormat}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            } catch (err) {
                banner.style.width = origWidth;
                banner.style.height = origHeight;
                banner.style.minWidth = origMinWidth;
                actions.style.display = 'flex';
            }
        }

        // ============================================
        // UTILITIES
        // ============================================
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast' + (isError ? ' error' : '');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        // ============================================
        // DEBUG FUNCTIONS (for testing)
        // ============================================
        // Call these from browser console to test states

        // Boost all counts to hit threshold
        function debugHitThreshold() {
            const demo = getDemoData();
            let total = Object.values(demo.counts).reduce((sum, c) => sum + c, 0);
            const needed = THRESHOLD - total + 100; // Go over by 100
            demo.counts['amazon-prime'] += needed;
            saveDemoData(demo);
            commitCounts = demo.counts;
            render();
            console.log('🎯 Threshold boosted! Total:', Object.values(commitCounts).reduce((sum, c) => sum + c, 0));
        }

        // Reset to pre-threshold state
        function debugResetThreshold() {
            const demo = getDemoData();
            COMPANIES.forEach(c => {
                demo.counts[c.id] = Math.floor(Math.random() * 50) + 5;
            });
            demo.counts['amazon-prime'] = 150;
            demo.counts['chatgpt'] = 120;
            demo.counts['netflix'] = 95;
            saveDemoData(demo);
            commitCounts = demo.counts;
            render();
            console.log('🔄 Reset! Total:', Object.values(commitCounts).reduce((sum, c) => sum + c, 0));
        }

        // Add N commits to leader
        function debugAddCommits(n = 100) {
            const demo = getDemoData();
            demo.counts['amazon-prime'] = (demo.counts['amazon-prime'] || 0) + n;
            saveDemoData(demo);
            commitCounts = demo.counts;
            render();
            console.log(`➕ Added ${n} commits to Amazon Prime`);
        }

        // Log current state
        function debugStatus() {
            const total = Object.values(commitCounts).reduce((sum, c) => sum + c, 0);
            console.log('📊 Current State:');
            console.log('  Phase:', currentPhase);
            console.log('  Total commits:', total);
            console.log('  Threshold:', THRESHOLD);
            console.log('  Threshold hit:', total >= THRESHOLD);
            console.log('  User commits:', userCommits);
            console.log('  User confirmed:', userConfirmed);
        }

        // Set phase override for testing
        function debugSetPhase(phase) {
            if (!['PRE_FRIDAY', 'FRIDAY', 'POST_FRIDAY', null].includes(phase)) {
                console.log('❌ Invalid phase. Use: PRE_FRIDAY, FRIDAY, POST_FRIDAY, or null (auto)');
                return;
            }
            debugPhaseOverride = phase;
            currentPhase = getCurrentPhase();
            render();
            console.log(`🗓️ Phase set to: ${phase || 'AUTO'} (current: ${currentPhase})`);
        }

        // Quick phase shortcuts
        function debugPreFriday() { debugSetPhase('PRE_FRIDAY'); }
        function debugFriday() { debugSetPhase('FRIDAY'); }
        function debugPostFriday() { debugSetPhase('POST_FRIDAY'); }
        function debugAutoPhase() { debugSetPhase(null); }

        // Reset all user state
        function debugResetUser() {
            userCommits = [];
            userConfirmed = [];
            saveLocalState();
            render();
            console.log('🔄 User state reset');
        }

        // Add some test commits for the user
        function debugAddUserCommits() {
            userCommits = ['amazon-prime', 'netflix', 'chatgpt'];
            userConfirmed = [];
            saveLocalState();
            render();
            console.log('➕ Added test user commits:', userCommits);
        }

        // ============================================
        // INIT
        // ============================================
        updateCountdown();
        setInterval(updateCountdown, 1000);
        loadData();
    </script>
</body>
</html>
